{% extends 'student_base_anyone.html' %}
{% load static %}
{% block title %}{{ user.student.nickname }}さんの情報{% endblock %}
{% block contents %}
    <p>ログインID{{ user.login_id }}</p>
    <p>メールアドレス{{ user.email }}</p>
    <p>電話番号: 
        {% if user.phone_number %}
            {% with user.phone_number|slice:":3" as prefix %}
                {% if prefix == '+81' %}
                    0{{ user.phone_number|slice:3 }}
                {% else %}
                    {{ user.phone_number }}
                {% endif %}
            {% endwith %}
        {% else %}
            電話番号未設定
        {% endif %}
    </p>
    <p>ニックネーム{{ user.student.nickname }}</p>
    <!--誕生日の表示にdateフィルターを使用している-->
    <p>誕生日: {{ user.student.date_of_birth|date:"Y年m月d日" }}</p>
    <p>入学年度{{ user.student.ent_year }}</p>
    <p>性別: 
        {% if user.student.gender == 'male' %}
            男性
        {% elif user.student.gender == 'female' %}
            女性
        {% else %}
            その他
        {% endif %}
    </p>
    <p>配慮事項(フリースクールにお伝えしたいこと){{ user.student.consideration }}</p>

    <!--いいねしたブログ記事-->
    <h2>いいねしたブログ記事</h2>
    {% for likeforblogpost in likeforblogposts %}
        <!--外部キーであるtargetで関連テーブルのデータを取得できる-->
        <p><a href="{% url 'studentapp:blogdetail' likeforblogpost.target.id %}">{{ likeforblogpost.target.title }}</a></p>
    {% empty %}
    <p>いいねしたブログ記事はありません</p>
    {% endfor %}
    
    <!--いいねしたサークル記事-->
    <h2>いいねしたサークル記事</h2>
    {% for likeforclub in likeforclubs %}
        <!--外部キーであるtargetで関連テーブルのデータを取得できる-->
        <p><a href="{% url 'studentapp:clubdetail' likeforclub.target.id %}">{{ likeforclub.target.club_name }}</a></p>
    {% empty %}
    <p>いいねしたサークルはありません</p>
    {% endfor %}

    <!--いいねしたイベント記事-->
    <h2>いいねしたイベント記事</h2>
    {% for likeforevent in likeforevents %}
    <!--外部キーであるtargetで関連テーブルのデータを取得できる-->
    <p><a href="{% url 'studentapp:eventdetail' likeforevent.target.id %}">{{ likeforevent.target.event_name }}</a></p>
    {% empty %}
    <p>いいねしたイベントはありません</p>
    {% endfor %}
    
    <h2>アカウント</h2>
    <p><a href="{% url 'studentapp:mypageupdate' %}">アカウント情報を編集する</a></p>
    <p><a href="{% url 'studentapp:mypagedeletecheck' %}">アカウントを削除する</a></p>
{% endblock %}